package com.android.enai;

import android.view.View;

public // UpdateData Asynchronously sends the value received from ADK Main Board.
// This is triggered by onReceive()
class UpdateData extends AsyncTask<Integer, Integer, String> {
	// Called to initiate the background activity
	@Override
	protected String doInBackground(Integer... sensorValue) {

		// Init SeeekBar Widget to display ADC sensor value in SeekBar
		// Max value of SeekBar is set to 1024
		return (String.valueOf(sensorValue[0])); // This goes to result

	}

	// Called when there's a status to be updated
	@Override
	protected void onProgressUpdate(Integer... values) {
		super.onProgressUpdate(values);
		// Not used in this case
	}

	// Called once the background activity has completed
	@Override
	protected void onPostExecute(String result) {
		// Init TextView Widget to display ADC sensor value in numeric.
//		TextView tvAdcvalue = (TextView) findViewById(R.id.SPO2HeartRateValue);
//		tvAdcvalue.setText(String.valueOf(result));
		TextView tvAdcvalue = (TextView) findViewById(R.id.textView1);
		try {
			String[] ss = {""+0.02*(ctr++),"0",result};
			tvAdcvalue.setText(String.format("%.3f: %.3f",Float.parseFloat(ss[0]),Float.parseFloat(ss[2])));
			drawview.getData(ss);
		} catch(Exception e) {
			tvAdcvalue.setText("ERROR!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
		}
	}
}
