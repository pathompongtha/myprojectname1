package com.android.enai;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.LinkedList;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Handler;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Toast;
import static java.lang.Float.*;

public class DrawPlotView extends View implements OnGestureListener{
	private static final String TAG = "DrawView";
//	private Context mContext;
	private Handler mHandler;
	private LinkedList<Point> points;
	private Point latest;
	private Paint blkPaint, paint2;

	public DrawPlotView(Context context, int h, int w) {
		super(context);
		points = new LinkedList<Point>();
		points.add(new Point(0,h));
		
		setFocusable(true);
		setFocusableInTouchMode(true);
		blkPaint = new Paint();
		blkPaint.setColor(Color.BLACK);
		blkPaint.setStrokeWidth(5);
		blkPaint.setAntiAlias(true);
		blkPaint.setStyle(Paint.Style.FILL_AND_STROKE);
		
		paint2 = new Paint();
		paint2.setColor(Color.BLUE);
		paint2.setStrokeWidth(5);
		paint2.setAntiAlias(true);
		paint2.setStyle(Paint.Style.FILL_AND_STROKE);
	}
	
	@Override
	public boolean onTouchEvent(MotionEvent e) {
		switch(e.getAction()) {
		case MotionEvent.ACTION_DOWN: {
			
			break;
		}
		case MotionEvent.ACTION_MOVE: {
			latest = new Point((int)e.getX(),(int)e.getY());
			invalidate();
			break;
		}
		case MotionEvent.ACTION_UP: {
			
			break;
		}
		}
		return true;
	}

	@Override
	public void onDraw(Canvas canvas) {
		Point prev = points.getFirst();
		for(Point p : points) { 
			canvas.drawLine(prev.x, prev.y, p.x, p.y, blkPaint);
			prev = p;
		}
		if(latest != null) canvas.drawLine(prev.x, prev.y, latest.x, latest.y, paint2);
	}
	
	@Override
	public boolean onDown(MotionEvent e) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
			float velocityY) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public void onLongPress(MotionEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
			float distanceY) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public void onShowPress(MotionEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public boolean onSingleTapUp(MotionEvent e) {
		// TODO Auto-generated method stub
		return false;
	}
}
